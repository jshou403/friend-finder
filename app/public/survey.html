<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder App</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!-- Own CSS -->
    <!-- <link rel="stylesheet" type="text/css" href="assets/css/style.css"> -->

</head>

<body>

    <div class="container">

        <!-- Survey -->
        <div class="row">

            <div class="col-12 jumbotron alert-danger">
                <!-- <h1 class="display-3">Friend Finder</h1> -->
                <h1 class="display-4">Survey Questions</h2>
                    <hr class="my-4">

                    <form>

                        <!-- Name -->
                        <div class="form-group">
                            <!-- <label for="formGroupYourName">Your Name (Required)</label> -->
                            <h4>Your Name (Required)</h4>
                            <input type="text" class="form-control" id="name" placeholder="Name Here" required>
                        </div>

                        <!-- Photo URL -->
                        <div class="form-group">
                            <!-- <label for="formGroupPhotoUrl">Link to Your Photo (Required)</label> -->
                            <h4>Your Photo (Required)</h4>
                            <input type="text" class="form-control" id="imageurl" placeholder="Image URL Here" required>
                        </div>

                        <!-- 1 -->
                        <div class="form-group">
                            <div>

                                <div class="row">
                                    <div class="col-12">
                                        <h4>1 - I enjoy a good challenge.</h4>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-12 col-md-4">
                                        <select name="question1" class="custom-select my-1 mr-sm-2" id="q1"> -->
                                            <option value="1" name="q1answer">1 - Strongly Disagree</option>
                                            <option value="2" name="q1answer">2 - Disagree</option>
                                            <option value="3" name="q1answer">3 - Neutral</option>
                                            <option value="4" name="q1answer">4 - Agree</option>
                                            <option value="5" name="q1answer">5 - Strongly Agree</option>
                                        </select>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- 2 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>2 - My family comes first.</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">

                                    <select name="question2" class="custom-select my-1 mr-sm-2" id="q2">
                                        <option value="1" name="q2answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q2answer">2 - Disagree</option>
                                        <option value="3" name="q2answer">3 - Neutral</option>
                                        <option value="4" name="q2answer">4 - Agree</option>
                                        <option value="5" name="q2answer">5 - Strongly Agree</option>
                                    </select>

                                </div>
                            </div>

                        </div>

                        <!-- 3 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>3 - I have a lot of fun.</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">
                                    <select name="question3" class="custom-select my-1 mr-sm-2" id="q3">
                                        <option value="1" name="q3answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q3answer">2 - Disagree</option>
                                        <option value="3" name="q3answer">3 - Neutral</option>
                                        <option value="4" name="q3answer">4 - Agree</option>
                                        <option value="5" name="q3answer">5 - Strongly Agree</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <!-- 4 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>4 - I rarely over-indulge.</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">
                                    <select name="question4" class="custom-select my-1 mr-sm-2" id="q4">
                                        <option value="1" name="q4answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q4answer">2 - Disagree</option>
                                        <option value="3" name="q4answer">3 - Neutral</option>
                                        <option value="4" name="q4answer">4 - Agree</option>
                                        <option value="5" name="q4answer">5 - Strongly Agree</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <!-- 5 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>5 - When it comes to money, I mean business!</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">
                                    <select name="question5" class="custom-select my-1 mr-sm-2" id="q5">
                                        <option value="1" name="q5answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q5answer">2 - Disagree</option>
                                        <option value="3" name="q5answer">3 - Neutral</option>
                                        <option value="4" name="q5answer">4 - Agree</option>
                                        <option value="5" name="q5answer">5 - Strongly Agree</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <!-- 6 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>6 - I believe in doing what is right.</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">
                                    <select name="question6" class="custom-select my-1 mr-sm-2" id="q6">
                                        <option value="1" name="q6answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q6answer">2 - Disagree</option>
                                        <option value="3" name="q6answer">3 - Neutral</option>
                                        <option value="4" name="q6answer">4 - Agree</option>
                                        <option value="5" name="q6answer">5 - Strongly Agree</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <!-- 7 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>7 - Being a good person is important to me.</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">
                                    <select name="question7" class="custom-select my-1 mr-sm-2" id="q7">
                                        <option value="1" name="q7answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q7answer">2 - Disagree</option>
                                        <option value="3" name="q7answer">3 - Neutral</option>
                                        <option value="4" name="q7answer">4 - Agree</option>
                                        <option value="5" name="q7answer">5 - Strongly Agree</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <!-- 8 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>8 - I do more than what is expected of me.</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">
                                    <select name="question8" class="custom-select my-1 mr-sm-2" id="q8">
                                        <option value="1" name="q8answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q8answer">2 - Disagree</option>
                                        <option value="3" name="q8answer">3 - Neutral</option>
                                        <option value="4" name="q8answer">4 - Agree</option>
                                        <option value="5" name="q8answer">5 - Strongly Agree</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <!-- 9 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>9 - I often get into trouble. </h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">
                                    <select name="question9" class="custom-select my-1 mr-sm-2" id="q9">
                                        <option value="1" name="q9answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q9answer">2 - Disagree</option>
                                        <option value="3" name="q9answer">3 - Neutral</option>
                                        <option value="4" name="q9answer">4 - Agree</option>
                                        <option value="5" name="q9answer">5 - Strongly Agree</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <!-- 10 -->
                        <div class="form-group">

                            <div class="row">
                                <div class="col-12">
                                    <h4>10 - I LOVE TV.</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-4">
                                    <select name="question10" class="custom-select my-1 mr-sm-2" id="q10">
                                        <option value="1" name="q10answer">1 - Strongly Disagree</option>
                                        <option value="2" name="q10answer">2 - Disagree</option>
                                        <option value="3" name="q10answer">3 - Neutral</option>
                                        <option value="4" name="q10answer">4 - Agree</option>
                                        <option value="5" name="q10answer">5 - Strongly Agree</option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <a class="btn btn-dark btn-lg" id="submit-btn" role="button" href="#" data-toggle="modal"
                            data-target="#friendmatch">Submit</a>

                    </form>

                    <!-- Modal -->
                    <div class="modal fade" id="friendmatch" tabindex="-1" role="dialog" aria-labelledby="friendmatch"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">

                                <div class="modal-header">
                                    <h5 class="modal-title">You've been matched to</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>

                                <div class="modal-body" id="friendmatchdisplay">
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-dark" data-dismiss="modal"
                                        id="close-btn">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>

            </div>

        </div>

        <!-- Footer Links -->
        <div class="row">
            <div class="col-12">
                <a href="../api/friends" class="text-dark">API Friends List</a> | <a
                    href="http://www.github.com/jshou403/friend-finder" class="text-dark">GitHub Repo</a>
            </div>
        </div>

    </div>

    <!-- jQuery link -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script>

        $("#submit-btn").on("click", function () {
            event.preventDefault();
            // console.log("submit-btn clicked");

            var surveyAnswers = [];

            surveyAnswers.push(parseInt($("option[name=q1answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q2answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q3answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q4answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q5answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q6answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q7answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q8answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q9answer]:selected").val()));
            surveyAnswers.push(parseInt($("option[name=q10answer]:selected").val()));

            var newFriend = {
                name: $("#name").val().trim(),
                URL: $("#imageurl").val().trim(),
                answersArr: surveyAnswers
            };

            // console.log(newFriend);
            // console.log("\n");
            // console.log("newFriend.name = " + newFriend.name);
            // console.log("newFriend.URL = " + newFriend.URL);
            // console.log("newFriend.answersArr = " + newFriend.answersArr);

            // posts the newFriend to the front end from to the back end
            // (at the back end the newFriend is compared to
            // the API and 
            // call back function returns data from the same post route
            $.post("api/friends", newFriend)
                .then(function (data) {
                    // console.log("data = ");
                    // console.log(data);
                    // console.log("Adding newFriend... ");

                    var friendMatch = data;
                    // console.log("friendmatch = " + friendMatch);
                    // console.log("friendmatch.name = " + friendMatch.name);

                    $("#friendmatchdisplay").empty();

                    $("#friendmatchdisplay").append("<div><h4>" + friendMatch.name + "</h2></div><div class=\"text-center\"><img src=\"" + friendMatch.URL + "\" class=\"img-fluid\"></div>");

                    $("#name").val("");
                    $("#imageurl").val("");
                    $(".custom-select").val(1);

                });

        });

    </script>

</body>

</html>